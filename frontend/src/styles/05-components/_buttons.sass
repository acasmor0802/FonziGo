// 05-components/_buttons.sass
// ===============================================
// Button Component - Estilos Globales
// ===============================================
// Estilos base para botones que se aplican globalmente
// Los componentes individuales pueden sobrescribir en sus archivos encapsulados

@use '../01-tools/mixins' as *
@use '../00-settings/variables' as *

// -----------------------------------------------
// Button Base (Clase .btn)
// -----------------------------------------------

.btn
  // Base styles
  +button-base
  position: relative
  overflow: hidden
  transition: background-color var(--transition-base), color var(--transition-base), border-color var(--transition-base), box-shadow var(--transition-base), transform var(--transition-fast)

  // -----------------------------------------------
  // Variantes
  // -----------------------------------------------

  &--primary
    background-color: var(--primary)
    color: var(--text-inverse)
    box-shadow: var(--shadow-sm)

    &:hover:not(:disabled):not(.btn--loading)
      background-color: var(--primary-hover)
      box-shadow: var(--shadow-md)
      transform: translateY(-1px)

    &:focus-visible
      outline: 2px solid var(--primary)
      outline-offset: 2px

  &--secondary
    background-color: var(--secondary)
    color: var(--text-inverse)
    box-shadow: var(--shadow-sm)

    &:hover:not(:disabled):not(.btn--loading)
      background-color: var(--secondary-hover)
      box-shadow: var(--shadow-md)
      transform: translateY(-1px)

    &:focus-visible
      outline: 2px solid var(--secondary)
      outline-offset: 2px

  &--outline
    background-color: transparent
    color: var(--primary)
    border: var(--border-medium) solid var(--primary)

    &:hover:not(:disabled):not(.btn--loading)
      background-color: var(--primary)
      color: var(--text-inverse)

  &--ghost
    background-color: transparent
    color: var(--text-primary)
    box-shadow: none

    &:hover:not(:disabled):not(.btn--loading)
      background-color: var(--bg-hover)

    // En el header, los botones ghost son blancos
    .header &
      color: var(--text-inverse)

      &:hover:not(:disabled):not(.btn--loading)
        background-color: rgba(255, 255, 255, 0.1)
        color: var(--secondary)

  &--danger
    background-color: var(--error)
    color: var(--text-inverse)
    box-shadow: var(--shadow-sm)

    &:hover:not(:disabled):not(.btn--loading)
      background-color: var(--error-dark)
      box-shadow: var(--shadow-md)
      transform: translateY(-1px)

  &--success
    background-color: var(--success)
    color: var(--text-inverse)
    box-shadow: var(--shadow-sm)

    &:hover:not(:disabled):not(.btn--loading)
      background-color: var(--success-dark)
      box-shadow: var(--shadow-md)
      transform: translateY(-1px)

  // -----------------------------------------------
  // Tama√±os
  // -----------------------------------------------

  &--sm
    padding: var(--spacing-2) var(--spacing-3)
    font-size: var(--text-xs)
    gap: var(--spacing-1)

  &--md
    padding: var(--spacing-3) var(--spacing-5)
    font-size: var(--text-base)

  &--lg
    padding: var(--spacing-4) var(--spacing-6)
    font-size: var(--text-lg)
    gap: var(--spacing-3)

  // -----------------------------------------------
  // Estados
  // -----------------------------------------------

  &:disabled,
  &--disabled
    opacity: 0.5
    cursor: not-allowed
    transform: none !important

  &--loading
    pointer-events: none

    .btn__content
      visibility: hidden

  // -----------------------------------------------
  // Modificadores
  // -----------------------------------------------

  &--full
    width: 100%

  &--icon-only
    padding: var(--spacing-3)
    aspect-ratio: 1 / 1

  // -----------------------------------------------
  // Elementos internos
  // -----------------------------------------------

  &__content
    display: flex
    align-items: center
    justify-content: center
    gap: inherit

  &__icon
    display: flex
    align-items: center
    justify-content: center

    &--left
      order: -1

    &--right
      order: 1

  &__spinner
    position: absolute
    +absolute-center
    display: flex
    align-items: center
    justify-content: center

  &__spinner-icon
    width: 20px
    height: 20px
    animation: btn-spin 0.8s linear infinite

  &__spinner-circle
    stroke-dasharray: 50
    stroke-dashoffset: 25
    animation: btn-dash 1.5s ease-in-out infinite
    stroke-linecap: round

// -----------------------------------------------
// Animaciones
// -----------------------------------------------

@keyframes btn-spin
  from
    transform: rotate(0deg)
  to
    transform: rotate(360deg)

@keyframes btn-dash
  0%
    stroke-dasharray: 1, 150
    stroke-dashoffset: 0
  50%
    stroke-dasharray: 90, 150
    stroke-dashoffset: -35
  100%
    stroke-dasharray: 90, 150
    stroke-dashoffset: -124
