.invoice-form
  max-width: 900px
  margin: 2rem auto
  padding: var(--spacing-8)
  background: var(--bg-card)
  border-radius: var(--radius-lg)
  box-shadow: var(--shadow-lg)
  border: 1px solid var(--border-light)
  transition: background-color var(--transition-base), box-shadow var(--transition-base), border-color var(--transition-base)

  &__title
    font-size: var(--text-2xl)
    margin: 0 0 var(--spacing-6) 0
    color: var(--text-primary)
    text-align: center

  &__section
    margin-bottom: var(--spacing-6)
    padding: var(--spacing-6)
    background: var(--bg-secondary)
    border: 2px solid var(--border-color)
    border-radius: var(--radius-md)
    transition: background-color var(--transition-base), border-color var(--transition-base)

    h3
      margin: 0 0 var(--spacing-4) 0
      color: var(--primary)
      font-size: var(--text-lg)
      font-weight: var(--font-semibold)

  &__total
    padding: var(--spacing-6)
    background: var(--header-accent)
    color: #333F51
    border-radius: var(--radius-md)
    text-align: center
    margin-bottom: var(--spacing-6)

    h3
      margin: 0
      font-size: var(--text-2xl)
      font-weight: var(--font-bold)
      color: #333F51

  &__actions
    display: flex
    gap: var(--spacing-3)
    justify-content: flex-end

.section-header
  display: flex
  justify-content: space-between
  align-items: center
  margin-bottom: var(--spacing-4)
  flex-wrap: wrap
  gap: var(--spacing-2)

  // Botón "Añadir" en el header de sección
  ::ng-deep .btn
    background-color: var(--header-bg)
    color: var(--header-text)
    border: none

    &:hover:not(:disabled):not(.btn--loading)
      background-color: var(--header-accent)
      color: #333F51

.form-field
  margin-bottom: var(--spacing-4)

  &:last-child
    margin-bottom: 0

  label
    display: block
    margin-bottom: var(--spacing-2)
    font-weight: var(--font-semibold)
    color: var(--text-primary)
    font-size: var(--text-sm)

.form-input
  width: 100%
  padding: var(--spacing-3) var(--spacing-4)
  border: 2px solid var(--border-color)
  border-radius: var(--radius-md)
  font-size: var(--text-base)
  transition: all var(--transition-base)
  background-color: var(--bg-input)
  color: var(--text-primary)

  &::placeholder
    color: var(--text-muted)

  &:focus
    outline: none
    border-color: var(--primary)
    box-shadow: 0 0 0 3px var(--primary-light)

  &.invalid
    border-color: var(--error)

  // Select específico
  &[type="date"]
    cursor: pointer

  option
    background-color: var(--bg-input)
    color: var(--text-primary)

select.form-input
  appearance: none
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9L1 4h10z'/%3E%3C/svg%3E")
  background-repeat: no-repeat
  background-position: right var(--spacing-3) center
  padding-right: var(--spacing-8)
  cursor: pointer

.error
  display: block
  margin-top: var(--spacing-1)
  color: var(--error)
  font-size: var(--text-xs)

  &::before
    content: '[!] '
    font-size: 0.75em

.array-container
  display: flex
  flex-direction: column
  gap: var(--spacing-3)

.array-item
  display: grid
  gap: var(--spacing-4)
  padding: var(--spacing-4)
  background: var(--bg-card)
  border: 2px solid var(--border-color)
  border-radius: var(--radius-md)
  align-items: start
  transition: background-color var(--transition-base), border-color var(--transition-base)

  &:hover
    border-color: var(--border-focus)

  &.direccion-item
    grid-template-columns: 2fr 1fr 100px 40px

  &.item-row
    grid-template-columns: 2fr 100px 120px 120px 40px

.btn-remove
  background: var(--error)
  color: white
  border: none
  border-radius: var(--radius-md)
  padding: var(--spacing-2)
  cursor: pointer
  font-size: var(--text-lg)
  transition: all var(--transition-base)
  height: 42px
  width: 42px
  display: flex
  align-items: center
  justify-content: center
  margin-top: 1.6rem

  &:hover:not(:disabled)
    background: var(--error-dark)
    transform: scale(1.05)

  &:disabled
    opacity: 0.5
    cursor: not-allowed

.subtotal
  padding: var(--spacing-3) var(--spacing-4)
  background: var(--bg-tertiary)
  border-radius: var(--radius-md)
  font-weight: var(--font-semibold)
  color: var(--primary)
  font-size: var(--text-base)
  text-align: right
  transition: background-color var(--transition-base)

// Responsive
@media (max-width: 768px)
  .invoice-form
    padding: var(--spacing-4)
    margin: var(--spacing-4)

    &__actions
      flex-direction: column
      
      ::ng-deep .btn
        width: 100%

  .array-item
    grid-template-columns: 1fr !important
    
    &.direccion-item, &.item-row
      grid-template-columns: 1fr !important

  .btn-remove
    margin-top: 0
    width: 100%
    height: auto
    padding: var(--spacing-3)
